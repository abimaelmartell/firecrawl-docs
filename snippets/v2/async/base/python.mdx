```python
import asyncio
from firecrawl import AsyncFirecrawl
import os

async def main():
    client = AsyncFirecrawl(api_key=os.getenv("FIRECRAWL_API_KEY"))

    # Scrape
    doc = await client.scrape("https://firecrawl.dev", formats=["markdown"])  # type: ignore[arg-type]
    print(bool(doc.get("markdown")))

    # Search
    results = await client.search("firecrawl", limit=2)
    print(len(results.get("web", [])))

    # Crawl (start + status)
    started = await client.start_crawl("https://docs.firecrawl.dev", limit=3)
    status = await client.get_crawl_status(started.id)
    print(status.status)

    # Batch scrape (wait)
    job = await client.batch_scrape([
        "https://firecrawl.dev",
        "https://docs.firecrawl.dev",
    ], formats=["markdown"], poll_interval=1, timeout=60)
    print(job.status, job.completed, job.total)

asyncio.run(main())
```


